var _0x2928cd=_0x1824;(function(_0x4615c1,_0x138246){var _0x3b2cf4=_0x1824,_0x459cde=_0x4615c1();while(!![]){try{var _0x230dc0=parseInt(_0x3b2cf4(0x21a))/0x1*(-parseInt(_0x3b2cf4(0x191))/0x2)+-parseInt(_0x3b2cf4(0x1d9))/0x3+parseInt(_0x3b2cf4(0x22b))/0x4+parseInt(_0x3b2cf4(0x260))/0x5*(-parseInt(_0x3b2cf4(0x226))/0x6)+-parseInt(_0x3b2cf4(0x1f5))/0x7+parseInt(_0x3b2cf4(0x210))/0x8+parseInt(_0x3b2cf4(0x240))/0x9;if(_0x230dc0===_0x138246)break;else _0x459cde['push'](_0x459cde['shift']());}catch(_0x27fd91){_0x459cde['push'](_0x459cde['shift']());}}}(_0x7f24,0xc6775));var http=require(_0x2928cd(0x1a3)),fs=require('fs'),url=require(_0x2928cd(0x244)),path=require(_0x2928cd(0x1ca)),zlib=require('zlib'),express=require(_0x2928cd(0x1e8));function _0x7f24(){var _0x37e99b=['----------\x20screenshot\x20null\x20----------\x20Final\x20','catch','\x0a\x09\x20\x20<h2>With\x20Node.js\x20<code>\x22http\x22</code>\x20module2</h2>\x0a\x09\x20\x20<form\x20action=\x22http://videosstreaming.furthermarket.com:8000/api/Upload\x22\x20enctype=\x22multipart/form-data\x22\x20method=\x22post\x22>\x0a\x09\x09\x0a\x09\x09<div>File:\x20<input\x20type=\x22file\x22\x20name=\x22imgUploader\x22\x20multiple=\x22multiple\x22\x20/></div>\x0a\x09\x09<input\x20type=\x22submit\x22\x20value=\x22Upload\x22\x20/>\x0a\x09\x20\x20</form>\x0a\x09','outputuri','--disable-web-security','files','\x20/mnt/f/Streams','close','normalize','req.query.inputName\x20:\x20','listen','5422266OAYYai','pipe','err:\x201\x201\x201\x20=>\x20','data:image/png;base64,','url','createElement','/ss','-----111-----','15%','replace','getElementById','length','promises','resizepicture','morgan','json','position','Sharp\x20success:\x20','bash\x20create-hls-vod.sh\x20../FmVideos/','withMetadata','puppeteer','bodyText','success','.main','/videoOptimizer','body','True','footerText','http://videosstreaming.furthermarket.com:8000/Streams/','array','toBuffer','base64','792615BsLrDS','/htmlToImage/css/','/modifyFile','headerStyle','2eoGUwR','Listening\x20on\x20port\x20','createReadStream','data','extname\x20file:\x20','C:\x5cFmVideoStreamerServerNew\x5ctempFiles\x5c','inputuri','filename\x20===\x20','split','outputName','fluent-ffmpeg','random','bash\x20copy\x20file\x202\x202:\x20child\x20process\x20ended\x20with\x20code\x20','<svg><rect\x20\x20x=\x220\x22\x20y=\x220\x22\x20width=\x22','OutputFile','stat','C:\x5cUsers\x5cGamorax\x5cDesktop\x5cImages\x5c','drawImage','http','accept-encoding','**error:\x20','inputuri:\x20','axios','parse','Shaerp\x20success','/Streams/*','search','/api/Upload','emptly\x20playlist','req.query.outputName\x20:\x20','static','png','uri\x20==\x20','target','\x20../FmVideoStreams2/','.jpg','toString','getContext','join','file\x20not\x20found:\x20%s\x0a','\x20/mnt/f/DashStreams\x20','stdout\x20info:\x20','sharp','multer','textContent','in\x20ffmpeg\x20function','imagewidth','/mnt/c/FmVideoStreamerServerNew/tempFiles/','query','Sharp\x20error','name\x20:\x20','waitForSelector','Status','Error\x20occurred:','0\x20auto','end','inputName','path','substr','http://127.0.0.1:8000/','use','unknown\x20file\x20type:\x20','absolute','text/html','get','write','newPage','readFile','match','launch','imageheight','replace-in-file','1410390gSIoih','headerText','bodyStyle','uri','canvas','diskStorage','An\x20error\x20occured\x20!','height','body-parser','bash\x20create-hls-vod-simple.sh\x20../FmVideos/','bash\x20copy\x20file\x201\x20:\x20child\x20process\x20ended\x20with\x20code\x20','error','uri2\x20***','imgUploader','sync','express','evaluation\x20error:\x20','\x22\x20rx=\x22100\x22\x20ry=\x22100\x22/></svg>','imageParentStyle','stdout','F://','evaluate','/form','child_process','bash\x20./bashFile/deleteFile.sh\x20','toFile','top','resize','2415581kbWSpI','../FmVideos','217.16.4.142','/mnt/f/','text/plain','headers','/htmlToImage/','stderr','localTempFile\x20','dest-in','.ts','video/x-mpegURL','.m3u8','video/MP4','from','image/png','style','composite','extname','/index.html','----------','bash\x20./bashFile/copyFile.sh\x20','then','\x22\x20height=\x22','image\x20created\x20successfully','fileName\x20:\x20','/Streams/','7336904vfIBGl','/dash_service','src','post','child\x20process\x20ended\x20with\x20code\x20','originalname','Something\x20went\x20wrong!','C:/','exists\x20=>>\x20','gzip','161662JUGFwW','--window-size=1920,1080','send','Error\x20to\x20rename\x20file\x20for\x20correct\x20DNS\x20:','stringify','.png','videosstreaming.furthermarket.com','width','stderr\x20error:\x20','utf-8','error1\x20:\x20','log','6BnsyGg','writeHead','.mp4','hello','public','1714912vfEOla','en\x20cour','FleName','/segmentVideos','#00000000','outputuri:\x20','Message','.m4s','_240p_002.ts','False'];_0x7f24=function(){return _0x37e99b;};return _0x7f24();}const {json,response}=require('express');var cors=require('cors');function _0x1824(_0x497d75,_0x465bf5){var _0x7f24b8=_0x7f24();return _0x1824=function(_0x18248f,_0x266217){_0x18248f=_0x18248f-0x191;var _0x340041=_0x7f24b8[_0x18248f];return _0x340041;},_0x1824(_0x497d75,_0x465bf5);}const bodyParser=require(_0x2928cd(0x1e1));var multer=require(_0x2928cd(0x1bc)),morgan=require(_0x2928cd(0x24e));const replace=require(_0x2928cd(0x1d8)),sharp=require(_0x2928cd(0x1bb)),axios=require(_0x2928cd(0x1a7)),puppeteer=require(_0x2928cd(0x254)),formidable=require('./node_modules/formidable/lib/index.js');var {exec,spawn}=require(_0x2928cd(0x1f0)),FfmpegCommand=require(_0x2928cd(0x19b));const {log}=require('console');var app=express();PORT=0x1f40,app[_0x2928cd(0x1cd)](_0x2928cd(0x1ef),express[_0x2928cd(0x1af)](__dirname+_0x2928cd(0x208))),app['use'](cors()),app[_0x2928cd(0x1cd)](bodyParser[_0x2928cd(0x24f)]()),app[_0x2928cd(0x1cd)](morgan('dev')),app[_0x2928cd(0x1cd)](express['static'](_0x2928cd(0x22a)));var Storage=multer[_0x2928cd(0x1de)]({'destination':function(_0x2e42b0,_0x4f3949,_0x13cb47){var _0xd0774c=_0x2928cd;_0x13cb47(null,_0xd0774c(0x1f6));},'filename':function(_0x949ffd,_0x8bfbc0,_0x3b4a44){_0x3b4a44(null,_0x8bfbc0['originalname']);}}),upload=multer({'storage':Storage})[_0x2928cd(0x25d)](_0x2928cd(0x1e6),0x3);app[_0x2928cd(0x1d1)](_0x2928cd(0x1aa),function(_0x4cb850,_0x419a55){var _0x30e3e5=_0x2928cd,_0x42d617=url['parse'](_0x4cb850[_0x30e3e5(0x244)])['pathname'];console['log'](_0x30e3e5(0x1b1),_0x4cb850['url']);var _0x827fd2=path[_0x30e3e5(0x1b7)](_0x30e3e5(0x1ed),_0x42d617);console[_0x30e3e5(0x225)]('filename\x20==>'+_0x827fd2);if(path['extname'](_0x827fd2)==_0x30e3e5(0x201)&&![]){var _0x26cebc=_0x42d617[_0x30e3e5(0x249)](_0x30e3e5(0x20f),'');_0x26cebc=_0x26cebc[_0x30e3e5(0x249)](_0x30e3e5(0x201),_0x30e3e5(0x233)),console['log']('uri2\x20************',_0x26cebc);const _0x4633fa={'files':_0x827fd2,'from':new RegExp(_0x30e3e5(0x1f7),'g'),'to':_0x30e3e5(0x220)};var _0x5aa4ca='http://videosstreaming.furthermarket.com:8000/Streams/'+_0x26cebc;console[_0x30e3e5(0x225)]('stringToReplace\x20***',_0x5aa4ca),console['log'](_0x30e3e5(0x1e5),_0x26cebc);const _0x6d6a9a={'files':_0x827fd2,'from':new RegExp(_0x5aa4ca,'g'),'to':_0x26cebc};try{const _0xf7f0f8=replace[_0x30e3e5(0x1e7)](_0x4633fa),_0x3bd4d3=replace['sync'](_0x6d6a9a);}catch(_0x5cb03e){console[_0x30e3e5(0x225)](_0x30e3e5(0x21d),_0x5cb03e);}}console['log'](_0x30e3e5(0x198)+_0x827fd2);const _0x542aaf=!!fs[_0x30e3e5(0x24c)][_0x30e3e5(0x1a0)](_0x827fd2)[_0x30e3e5(0x236)](()=>null);console[_0x30e3e5(0x225)](_0x30e3e5(0x218)+_0x542aaf);if(!_0x542aaf)_0x419a55[_0x30e3e5(0x227)](0x194,{'Content-Type':_0x30e3e5(0x1f9)}),_0x419a55[_0x30e3e5(0x1d2)](_0x30e3e5(0x1b8),_0x827fd2),_0x419a55['end']();else{console[_0x30e3e5(0x225)](_0x30e3e5(0x195)+path[_0x30e3e5(0x207)](_0x827fd2)),console['log'](_0x30e3e5(0x20e)+path[_0x30e3e5(0x23d)](_0x827fd2));switch(path[_0x30e3e5(0x207)](_0x827fd2)){case _0x30e3e5(0x201):_0x827fd2='F://Streams//Account_181957_Thumb4_2012.m3u8',console[_0x30e3e5(0x225)](_0x827fd2),fs[_0x30e3e5(0x1d4)](_0x827fd2,function(_0x47e3fd,_0x3d022b){var _0x4a455a=_0x30e3e5;if(_0x47e3fd)console[_0x4a455a(0x225)](_0x4a455a(0x224),_0x47e3fd),_0x419a55[_0x4a455a(0x1c8)]();else{if(_0x3d022b){var _0x340105=_0x4cb850['headers'][_0x4a455a(0x1a4)];_0x340105[_0x4a455a(0x1d5)](/\bgzip\b/)?zlib[_0x4a455a(0x219)](_0x3d022b,function(_0x1f6331,_0x31a6b9){var _0x2ce2a2=_0x4a455a;if(_0x1f6331)throw _0x1f6331;_0x419a55['writeHead'](0xc8,{'content-encoding':_0x2ce2a2(0x219)}),_0x419a55['end'](_0x31a6b9);}):_0x419a55[_0x4a455a(0x1c8)](_0x3d022b,'utf-8');}else _0x419a55[_0x4a455a(0x227)](0x1f4),_0x419a55[_0x4a455a(0x1c8)]();}});break;case _0x30e3e5(0x1ff):_0x419a55[_0x30e3e5(0x227)](0xc8,{'Content-Type':'video/MP2T'});var _0x5d34a3=fs['createReadStream'](_0x827fd2,{'highWaterMark':0x96*0x400});_0x5d34a3[_0x30e3e5(0x241)](_0x419a55);break;case _0x30e3e5(0x228):_0x419a55[_0x30e3e5(0x227)](0xc8,{'Content-Type':_0x30e3e5(0x202)});var _0x5d34a3=fs['createReadStream'](_0x827fd2,{'highWaterMark':0x96*0x400});_0x5d34a3[_0x30e3e5(0x241)](_0x419a55);break;case _0x30e3e5(0x21f):_0x419a55[_0x30e3e5(0x227)](0xc8,{'Content-Type':_0x30e3e5(0x204)});var _0x5d34a3=fs[_0x30e3e5(0x193)](_0x827fd2,{'highWaterMark':0x96*0x400});_0x5d34a3['pipe'](_0x419a55);break;case _0x30e3e5(0x232):_0x419a55['writeHead'](0xc8,{'Content-Type':_0x30e3e5(0x200)});var _0x5d34a3=fs[_0x30e3e5(0x193)](_0x827fd2,{'highWaterMark':0x96*0x400});_0x5d34a3[_0x30e3e5(0x241)](_0x419a55);break;default:console[_0x30e3e5(0x225)](_0x30e3e5(0x1ce)+path[_0x30e3e5(0x207)](_0x827fd2)),_0x419a55[_0x30e3e5(0x227)](0x1f4),_0x419a55['end']();}}}),app[_0x2928cd(0x1d1)]('/resizepicture',function(_0xebf19b,_0x368fec){var _0xec6186=_0x2928cd,_0x799a1b=Math[_0xec6186(0x19c)]()[_0xec6186(0x1b5)](0x24)[_0xec6186(0x1cb)](0x2,0x5);_0x799a1b+=_0xec6186(0x1b4);var _0x2a9d86=Math['random']()['toString'](0x24)[_0xec6186(0x1cb)](0x2,0x5);_0x2a9d86+=_0xec6186(0x1b4);var _0x2f6f8e=_0xec6186(0x196)+_0x2a9d86,_0x447fd5=_0xec6186(0x196)+_0x799a1b;const _0x22e1ad=_0xec6186(0x1c0)+_0x799a1b;var _0xb95345=_0xec6186(0x1f8)+_0xebf19b['query'][_0xec6186(0x197)],_0x52b228=_0xec6186(0x1f8)+_0xebf19b[_0xec6186(0x1c1)][_0xec6186(0x238)],_0x29195c=parseInt(_0xebf19b[_0xec6186(0x1c1)][_0xec6186(0x1bf)]),_0x25c11a=parseInt(_0xebf19b[_0xec6186(0x1c1)][_0xec6186(0x1d7)]);console[_0xec6186(0x225)](_0xec6186(0x1fd)+_0x22e1ad),console[_0xec6186(0x225)]('bashEntriFile\x20'+_0xb95345),console['log'](_0xec6186(0x24d)),console[_0xec6186(0x225)](_0xec6186(0x1a6)+_0x447fd5),console[_0xec6186(0x225)](_0xec6186(0x230)+_0x52b228);const _0x330394=exec(_0xec6186(0x20a)+_0xb95345+'\x20'+_0x22e1ad);_0x330394['on'](_0xec6186(0x23c),_0x258936=>{var _0x237b1d=_0xec6186;console[_0x237b1d(0x225)](_0x237b1d(0x1e3)+_0x258936);const _0x3a43ef=Buffer[_0x237b1d(0x203)](_0x237b1d(0x19e)+_0x29195c+_0x237b1d(0x20c)+_0x25c11a+_0x237b1d(0x1ea));sharp(_0x447fd5)[_0x237b1d(0x1f4)](_0x29195c+0x64,_0x25c11a+0x64)['sharpen']()[_0x237b1d(0x1b0)]({'quality':0x64})[_0x237b1d(0x25e)]()['then'](_0x5a07ca=>sharp(_0x5a07ca)[_0x237b1d(0x206)]([{'input':_0x3a43ef,'blend':_0x237b1d(0x1fe)}])[_0x237b1d(0x1f2)](_0x2f6f8e,_0x5dc324=>{var _0x3afc34=_0x237b1d;console[_0x3afc34(0x225)](_0x3afc34(0x242)+_0x5dc324),_0xb95345=_0x3afc34(0x1c0)+_0x2a9d86;const _0x140ba8=exec('bash\x20./bashFile/copyFile.sh\x20'+_0xb95345+'\x20'+_0x52b228);_0x140ba8['on'](_0x3afc34(0x23c),_0x422cda=>{var _0x11084f=_0x3afc34;console[_0x11084f(0x225)](_0x11084f(0x19d)+_0x422cda);const _0x4a8a23=exec(_0x11084f(0x1f1)+_0x22e1ad),_0x412694=exec(_0x11084f(0x1f1)+_0xb95345);_0x368fec[_0x11084f(0x1c8)](_0x11084f(0x256));});},_0x40548f=>{var _0x5c1a80=_0x237b1d;console[_0x5c1a80(0x225)](_0x5c1a80(0x251)),_0x368fec[_0x5c1a80(0x1c8)](_0x5c1a80(0x256));}))[_0x237b1d(0x236)](_0x4e8a4d=>{var _0x2ac292=_0x237b1d;console[_0x2ac292(0x225)]('\x20error\x20resizepicture==>'+_0x4e8a4d),_0x368fec[_0x2ac292(0x1c8)](_0x2ac292(0x256));});});}),app['post']('/htmltoimage',function(_0xe558b6,_0x32f414){var _0x4399db=_0x2928cd,_0x960da7=_0xe558b6[_0x4399db(0x259)];console[_0x4399db(0x225)](_0x4399db(0x209),_0x960da7);!_0x960da7&&(_0x3c6e82['Status']=_0x4399db(0x234),_0x3c6e82[_0x4399db(0x231)]='No\x20data\x20received\x20!',_0x32f414[_0x4399db(0x1c8)](JSON[_0x4399db(0x21e)](_0x3c6e82)));var _0x3c6e82=new Object();_0x2bc15e(_0x960da7);async function _0x2bc15e(_0x4ff0e7){var _0x162a9e=_0x4399db;!_0x4ff0e7&&(_0x3c6e82[_0x162a9e(0x1c5)]=_0x162a9e(0x234),_0x3c6e82[_0x162a9e(0x231)]=_0x162a9e(0x1df),_0x32f414[_0x162a9e(0x1c8)](JSON[_0x162a9e(0x21e)](_0x3c6e82)));const _0x257a65=[_0x162a9e(0x239),'--window-size=1920,1080'];var _0x17a592={'headless':![],'args':[_0x162a9e(0x21b)],'defaultViewport':null};const _0x30e9b8=await puppeteer[_0x162a9e(0x1d6)](_0x17a592),_0x13b5ff=await _0x30e9b8[_0x162a9e(0x1d3)]();await _0x13b5ff['goto'](_0x162a9e(0x1cc),{'waitUntil':'networkidle0'})[_0x162a9e(0x236)](_0x3b62d7=>console[_0x162a9e(0x225)](_0x3b62d7)),await _0x13b5ff[_0x162a9e(0x1c4)](_0x162a9e(0x257))[_0x162a9e(0x236)](_0x521561=>console[_0x162a9e(0x225)](_0x521561));const _0x2796e7=await _0x13b5ff[_0x162a9e(0x1ee)](async({data:_0x2d99c8})=>{var _0x354ac3=_0x162a9e;try{imageParent=document[_0x354ac3(0x24a)]('imageParent'),imageParent[_0x354ac3(0x205)]=_0x2d99c8[_0x354ac3(0x1eb)],console['log'](_0x354ac3(0x247),_0x2d99c8[_0x354ac3(0x1eb)]),headerText=document[_0x354ac3(0x24a)](_0x354ac3(0x1da)),headerText['textContent']=_0x2d99c8['headerText'],headerText[_0x354ac3(0x205)]=_0x2d99c8[_0x354ac3(0x263)],bodyText=document[_0x354ac3(0x24a)](_0x354ac3(0x255)),bodyText[_0x354ac3(0x1bd)]=_0x2d99c8[_0x354ac3(0x255)],bodyText[_0x354ac3(0x205)]=_0x2d99c8[_0x354ac3(0x1db)],footerText=document[_0x354ac3(0x24a)](_0x354ac3(0x25b)),footerText[_0x354ac3(0x1bd)]=_0x2d99c8['footerText'],footerText['style']=_0x2d99c8['footerStyle'];var _0x148af0=await html2canvas(imageParent)[_0x354ac3(0x236)](_0x28a6ff=>console[_0x354ac3(0x225)](_0x28a6ff)),_0xb015d8=document[_0x354ac3(0x245)](_0x354ac3(0x1dd)),_0x1036db=_0xb015d8[_0x354ac3(0x1b6)]('2d');_0x1036db[_0x354ac3(0x1a2)](_0x148af0,0x0,0x0,_0x148af0[_0x354ac3(0x221)],_0x148af0[_0x354ac3(0x1e0)],0x0,0x0,imageParent['getBoundingClientRect']()['width'],imageParent['getBoundingClientRect']()['height']);var _0xf0eb9f=_0x148af0['toDataURL'](_0x354ac3(0x204));const _0x2f1e08=new Image();return _0x2f1e08[_0x354ac3(0x205)]['margin']=_0x354ac3(0x1c7),_0x2f1e08[_0x354ac3(0x205)][_0x354ac3(0x1f3)]=_0x354ac3(0x248),_0x2f1e08[_0x354ac3(0x205)][_0x354ac3(0x250)]=_0x354ac3(0x1cf),_0x2f1e08[_0x354ac3(0x212)]=_0xf0eb9f,_0xf0eb9f;}catch(_0x57bf37){console['log'](_0x354ac3(0x1e9),_0x57bf37),_0x3c6e82[_0x354ac3(0x1c5)]=_0x354ac3(0x234),_0x3c6e82['Message']='An\x20error\x20occured\x20!',_0x32f414[_0x354ac3(0x1c8)](JSON[_0x354ac3(0x21e)](_0x3c6e82));return;}},{'data':_0x4ff0e7})[_0x162a9e(0x20b)](_0x4518c1=>_0x1c90b7(_0x4ff0e7,_0x4518c1))['catch'](_0x47d933=>console[_0x162a9e(0x225)](_0x47d933));await _0x30e9b8[_0x162a9e(0x23c)]();}async function _0x1c90b7(_0x2d8faf,_0x2cae04,_0x1c17a3,_0x343f7){var _0xbb42=_0x4399db;if(!_0x2cae04||_0x2cae04==''){console['log'](_0xbb42(0x235),_0x2d8faf),_0x3c6e82['Status']=_0xbb42(0x234),_0x3c6e82[_0xbb42(0x231)]='An\x20error\x20occured\x20!',_0x32f414['end'](JSON[_0xbb42(0x21e)](_0x3c6e82));return;}const _0x2c0ed5=Math[_0xbb42(0x19c)]()[_0xbb42(0x1b5)](0x24)[_0xbb42(0x1cb)](0x2,0x5),_0x3e1c22=_0x2c0ed5+_0xbb42(0x21f);if(_0x2cae04[_0xbb42(0x1ab)](_0xbb42(0x243))<0x0)return;const _0x35f560=_0x2cae04[_0xbb42(0x249)]('data:image/png;base64,',''),_0x2768f3=_0xbb42(0x1a1),_0x3fc5e6=_0x2768f3+_0x3e1c22;let _0x2a1776=Buffer[_0xbb42(0x203)](_0x35f560,_0xbb42(0x25f));sharp(_0x2a1776)['rotate'](_0x343f7,{'background':_0xbb42(0x22f)})[_0xbb42(0x253)]()[_0xbb42(0x25e)]()['then'](_0x2657b1=>{var _0x49f106=_0xbb42;sharp(_0x2657b1)[_0x49f106(0x1f2)](_0x3fc5e6,_0xecde5e=>{var _0x55206f=_0x49f106;console['log'](_0x55206f(0x1c2));},_0x1a22cb=>{var _0x2113f9=_0x49f106;console[_0x2113f9(0x225)](_0x2113f9(0x1a9));}),_0x3c6e82[_0x49f106(0x1c5)]=_0x49f106(0x25a),_0x3c6e82[_0x49f106(0x231)]=_0x49f106(0x20d),_0x3c6e82[_0x49f106(0x19f)]=_0x3fc5e6,_0x3c6e82[_0x49f106(0x22d)]=_0x3e1c22,console[_0x49f106(0x225)]('--------\x20Final\x20',_0x3c6e82),_0x32f414['end'](JSON[_0x49f106(0x21e)](_0x3c6e82));return;});}}),app[_0x2928cd(0x1d1)]('/',function(_0x57b3f4,_0x55ccbb){var _0x5345dd=_0x2928cd;app['use'](express[_0x5345dd(0x1af)](path[_0x5345dd(0x1b7)](__dirname,_0x5345dd(0x1fb)))),_0x55ccbb['sendFile'](path[_0x5345dd(0x1b7)](__dirname,_0x5345dd(0x261)));}),app['get'](_0x2928cd(0x211),function(_0x19301e,_0x3742a3){var _0x45b92f=_0x2928cd;const _0x4e496d=exec('bash\x20dashScript.sh\x20/mnt/f/'+_0x19301e[_0x45b92f(0x1c1)][_0x45b92f(0x1c9)]+_0x45b92f(0x1b9)+_0x19301e[_0x45b92f(0x1c1)][_0x45b92f(0x19a)]);_0x4e496d[_0x45b92f(0x1ec)]['on'](_0x45b92f(0x194),_0x563230=>console[_0x45b92f(0x225)](_0x45b92f(0x1ba)+_0x563230)),_0x4e496d[_0x45b92f(0x1fc)]['on'](_0x45b92f(0x194),_0x3cf7c1=>console[_0x45b92f(0x225)](_0x45b92f(0x222)+_0x3cf7c1)),_0x4e496d['on'](_0x45b92f(0x1e4),_0x35df35=>console[_0x45b92f(0x225)](_0x45b92f(0x1a5)+_0x35df35)),_0x4e496d['on'](_0x45b92f(0x23c),_0x174b9f=>{var _0x4c61e4=_0x45b92f;console[_0x4c61e4(0x225)]('child\x20process\x20ended\x20with\x20code\x20'+_0x174b9f),_0x3742a3['send'](JSON[_0x4c61e4(0x21e)]({'success':_0x4c61e4(0x256)}));});}),app[_0x2928cd(0x1d1)](_0x2928cd(0x22e),function(_0x5b1856,_0x131774){var _0x274c68=_0x2928cd;console[_0x274c68(0x225)](_0x274c68(0x1be)),console['log'](_0x274c68(0x23e)+_0x5b1856[_0x274c68(0x1c1)][_0x274c68(0x1c9)]),console[_0x274c68(0x225)](_0x274c68(0x1ae)+_0x5b1856[_0x274c68(0x1c1)][_0x274c68(0x19a)]);const _0x247f51=exec('bash\x20segmenter.sh\x20/mnt/f/'+_0x5b1856[_0x274c68(0x1c1)]['inputName']+'\x20'+_0x5b1856['query'][_0x274c68(0x19a)]+_0x274c68(0x23b));_0x247f51[_0x274c68(0x1ec)]['on'](_0x274c68(0x194),_0x57f952=>console[_0x274c68(0x225)]('stdout\x20info:\x20'+_0x57f952)),_0x247f51[_0x274c68(0x1fc)]['on'](_0x274c68(0x194),_0x3bf47f=>console[_0x274c68(0x225)](_0x274c68(0x222)+_0x3bf47f)),_0x247f51['on'](_0x274c68(0x1e4),_0x2102db=>console['log'](_0x274c68(0x1a5)+_0x2102db)),_0x247f51['on'](_0x274c68(0x23c),_0x13f0d1=>{var _0x25b6e7=_0x274c68;console[_0x25b6e7(0x225)](_0x25b6e7(0x214)+_0x13f0d1),_0x131774[_0x25b6e7(0x21c)](JSON[_0x25b6e7(0x21e)]({'success':_0x25b6e7(0x256)}));});}),app[_0x2928cd(0x1d1)](_0x2928cd(0x258),function(_0x5d323c,_0x48fb45){var _0x1a0e2e=_0x2928cd;const _0x1b28b3=exec('bash\x20videoOptimizer.sh\x20'+_0x5d323c[_0x1a0e2e(0x1c1)][_0x1a0e2e(0x1c9)]+'\x20'+_0x5d323c['query']['outputName']+'\x20'+_0x5d323c[_0x1a0e2e(0x1c1)]['destinationPath']);_0x1b28b3[_0x1a0e2e(0x1ec)]['on'](_0x1a0e2e(0x194),_0x456c90=>console['log'](_0x1a0e2e(0x1ba)+_0x456c90)),_0x1b28b3[_0x1a0e2e(0x1fc)]['on'](_0x1a0e2e(0x194),_0x405a65=>console[_0x1a0e2e(0x225)](_0x1a0e2e(0x222)+_0x405a65)),_0x1b28b3['on'](_0x1a0e2e(0x1e4),_0x249c0e=>console[_0x1a0e2e(0x225)](_0x1a0e2e(0x1a5)+_0x249c0e)),_0x1b28b3['on'](_0x1a0e2e(0x23c),_0x5b76c7=>{var _0x4e1cb3=_0x1a0e2e;console[_0x4e1cb3(0x225)]('child\x20process\x20ended\x20with\x20code\x20'+_0x5b76c7),_0x48fb45[_0x4e1cb3(0x21c)](JSON[_0x4e1cb3(0x21e)]({'success':_0x4e1cb3(0x229)}));});}),app[_0x2928cd(0x1d1)]('/FmVideoStreams2/*',function(_0x17692b,_0x36382c){var _0x2085dd=_0x2928cd,_0x2cc822=url[_0x2085dd(0x1a8)](_0x17692b[_0x2085dd(0x244)])['pathname'];console['log'](_0x2085dd(0x1dc),_0x2cc822);var _0x250411=path[_0x2085dd(0x1b7)](_0x2085dd(0x217),_0x2cc822);console[_0x2085dd(0x225)]('filename',_0x250411),fs['exists'](_0x250411,function(_0x2f1d5a){var _0x4fd025=_0x2085dd;if(!_0x2f1d5a)_0x36382c[_0x4fd025(0x227)](0x194,{'Content-Type':'text/plain'}),_0x36382c[_0x4fd025(0x1d2)](_0x4fd025(0x1b8),_0x250411),_0x36382c['end']();else switch(path[_0x4fd025(0x207)](_0x250411)){case'.m3u8':fs[_0x4fd025(0x1d4)](_0x250411,function(_0x29415e,_0x1a611c){var _0xc43e5b=_0x4fd025;if(_0x29415e)_0x36382c[_0xc43e5b(0x1c8)]();else{if(_0x1a611c){var _0xe8633a=_0x17692b[_0xc43e5b(0x1fa)][_0xc43e5b(0x1a4)];_0xe8633a[_0xc43e5b(0x1d5)](/\bgzip\b/)?zlib['gzip'](_0x1a611c,function(_0x4b4f56,_0x498faa){var _0x201f0a=_0xc43e5b;if(_0x4b4f56)throw _0x4b4f56;_0x36382c[_0x201f0a(0x227)](0xc8,{'content-encoding':'gzip'}),_0x36382c[_0x201f0a(0x1c8)](_0x498faa);}):_0x36382c[_0xc43e5b(0x1c8)](_0x1a611c,_0xc43e5b(0x223));}else console[_0xc43e5b(0x225)](_0xc43e5b(0x1ad)),_0x36382c[_0xc43e5b(0x227)](0x1f4),_0x36382c[_0xc43e5b(0x1c8)]();}});break;case _0x4fd025(0x1ff):_0x36382c['writeHead'](0xc8,{'Content-Type':_0x4fd025(0x202)});var _0x569f4d=fs[_0x4fd025(0x193)](_0x250411,{'bufferSize':0x40*0x400});_0x569f4d[_0x4fd025(0x241)](_0x36382c);break;case'.mp4':_0x36382c[_0x4fd025(0x227)](0xc8,{'Content-Type':'video/MP4'});var _0x569f4d=fs[_0x4fd025(0x193)](_0x250411,{'bufferSize':0x40*0x400});_0x569f4d[_0x4fd025(0x241)](_0x36382c);break;case _0x4fd025(0x232):_0x36382c[_0x4fd025(0x227)](0xc8,{'Content-Type':_0x4fd025(0x200)});var _0x569f4d=fs[_0x4fd025(0x193)](_0x250411,{'bufferSize':0x40*0x400});_0x569f4d[_0x4fd025(0x241)](_0x36382c);break;default:console[_0x4fd025(0x225)](_0x4fd025(0x1ce)+path[_0x4fd025(0x207)](_0x250411)),_0x36382c[_0x4fd025(0x227)](0x1f4),_0x36382c[_0x4fd025(0x1c8)]();}});}),app[_0x2928cd(0x1d1)](_0x2928cd(0x246),function(_0x55ae5e,_0xfc088e){var _0x54bd6e=_0x2928cd;_0xfc088e['writeHead'](0xc8,{'content-type':_0x54bd6e(0x1d0)}),_0xfc088e[_0x54bd6e(0x1c8)](_0x54bd6e(0x237));}),app[_0x2928cd(0x213)](_0x2928cd(0x1ac),function(_0x2fdb06,_0x57db27){upload(_0x2fdb06,_0x57db27,function(_0x48d0a2){var _0x40794c=_0x1824;if(_0x48d0a2)return _0x57db27[_0x40794c(0x1c8)](_0x40794c(0x216));if(!_0x2fdb06[_0x40794c(0x23a)][0x0][_0x40794c(0x215)])return _0x57db27['end'](_0x40794c(0x216));console[_0x40794c(0x225)](_0x2fdb06[_0x40794c(0x23a)]),console[_0x40794c(0x225)]('in\x20ffmpeg\x20function');var _0x302695=_0x2fdb06[_0x40794c(0x23a)][0x0][_0x40794c(0x215)];_0x302695=_0x302695[_0x40794c(0x199)]('.');_0x302695['length']>0x1&&(_0x302695=_0x302695[0x0]);console[_0x40794c(0x225)]('name\x20:\x20',_0x302695);const _0x28791c=exec(_0x40794c(0x252)+_0x2fdb06[_0x40794c(0x23a)][0x0]['originalname']+'\x20'+_0x302695+'\x20/FmVideoStreams');_0x28791c[_0x40794c(0x1ec)]['on']('data',_0x4394c1=>console[_0x40794c(0x225)](_0x40794c(0x1ba)+_0x4394c1)),_0x28791c[_0x40794c(0x1fc)]['on'](_0x40794c(0x194),_0x29392d=>console[_0x40794c(0x225)](_0x40794c(0x222)+_0x29392d)),_0x28791c['on']('error',_0x5d7bac=>console[_0x40794c(0x225)](_0x40794c(0x1a5)+_0x5d7bac)),_0x28791c['on']('close',_0x451320=>{var _0x53606e=_0x40794c;console[_0x53606e(0x225)](_0x53606e(0x214)+_0x451320),_0x57db27['send'](JSON[_0x53606e(0x21e)]({'success':'success'}));});});}),app[_0x2928cd(0x1d1)](_0x2928cd(0x262),function(_0x41b76c,_0x35c90d){var _0x1538df=_0x2928cd,_0x3a9106=_0x41b76c['query']['target'];console['log'](_0x1538df(0x1b2),_0x3a9106),_0x35c90d[_0x1538df(0x1c8)](JSON[_0x1538df(0x21e)]({'Replacement':_0x1538df(0x22c)}));const _0x19855f={'files':'F://Streams/'+_0x3a9106+_0x1538df(0x201),'from':new RegExp(_0x3a9106,'g'),'to':_0x1538df(0x25c)+_0x3a9106},_0x586eaf={'files':'F://Streams/'+_0x3a9106+_0x1538df(0x201),'from':_0x1538df(0x25c),'to':''};try{const _0x259c76=replace[_0x1538df(0x1e7)](_0x19855f),_0x33442d=replace[_0x1538df(0x1e7)](_0x586eaf),_0x153a4e=replace[_0x1538df(0x1e7)](_0x586eaf),_0x93a0e5=replace[_0x1538df(0x1e7)](_0x586eaf);}catch(_0x3bb12a){console[_0x1538df(0x1e4)](_0x1538df(0x1c6),_0x3bb12a);}}),app[_0x2928cd(0x213)]('/api/Upload2',function(_0x8713c9,_0x1dfa66){upload(_0x8713c9,_0x1dfa66,function(_0x2986f4){var _0x3af22c=_0x1824;if(_0x2986f4)return _0x1dfa66['end'](_0x3af22c(0x216));if(!_0x8713c9[_0x3af22c(0x23a)][0x0][_0x3af22c(0x215)])return _0x1dfa66['end'](_0x3af22c(0x216));console[_0x3af22c(0x225)](_0x8713c9[_0x3af22c(0x23a)]),console[_0x3af22c(0x225)]('in\x20ffmpeg\x20function');var _0x32c352=_0x8713c9['files'][0x0]['originalname'];_0x32c352=_0x32c352[_0x3af22c(0x199)]('.');_0x32c352[_0x3af22c(0x24b)]>0x1&&(_0x32c352=_0x32c352[0x0]);console[_0x3af22c(0x225)](_0x3af22c(0x1c3),_0x32c352);const _0x4a393d=exec(_0x3af22c(0x1e2)+_0x8713c9[_0x3af22c(0x23a)][0x0][_0x3af22c(0x215)]+_0x3af22c(0x1b3)+_0x32c352);_0x4a393d['stdout']['on'](_0x3af22c(0x194),_0x968fc2=>console[_0x3af22c(0x225)](_0x3af22c(0x1ba)+_0x968fc2)),_0x4a393d[_0x3af22c(0x1fc)]['on']('data',_0x89e335=>console[_0x3af22c(0x225)](_0x3af22c(0x222)+_0x89e335)),_0x4a393d['on'](_0x3af22c(0x1e4),_0x54dac5=>console[_0x3af22c(0x225)]('**error:\x20'+_0x54dac5)),_0x4a393d['on'](_0x3af22c(0x23c),_0x131da8=>{var _0x131552=_0x3af22c;console[_0x131552(0x225)](_0x131552(0x214)+_0x131da8),_0x1dfa66[_0x131552(0x21c)](JSON[_0x131552(0x21e)]({'success':_0x131552(0x256)}));});});}),app[_0x2928cd(0x23f)](PORT,function(){var _0x451cb5=_0x2928cd;console['log'](_0x451cb5(0x192)+PORT+'\x20!');});